<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To-Do List - CollegeUtils</title>
    <link rel="stylesheet" href="../css/style.css">
</head>

<body>

    <header>
        <nav>

            <div class="logo">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="#fb923c" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="16 18 22 12 16 6"></polyline>
                    <polyline points="8 6 2 12 8 18"></polyline>
                </svg>
                <span style="color: white; font-weight: 700; font-size: 1rem;">OpenSource Camp</span>
                <img src="../assets/ieee logo.png" alt="IEEE Logo" style="height: 36px; width: auto;">
            </div>

            <div class="nav-center">
                <span style="font-size: 1.5rem; font-weight: 700; color: #ffffff;">CollegeUtils</span>
            </div>

            <!-- Mobile Menu Toggle -->
            <div class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="Toggle navigation menu">
                <span></span>
                <span></span>
                <span></span>
            </div>

            <ul class="nav-links" id="navLinks">
                <li><a href="../index.html">Home</a></li>
                <li><a href="contributing.html">Contributing</a></li>
            </ul>
        </nav>
    </header>

    <!-- Mobile Menu JavaScript -->
    <script src="../js/mobile-menu.js"></script>

    <main>
        <h1 class="page-title">My To-Do List</h1>

        <!-- 
            TODO for Contributors:
            1. Create an input box to add new tasks.
            2. Create a list (<ul>) to display tasks.
            3. Style completed tasks (e.g., strikethrough).
        -->

        <!-- <div class="card text-center" style="max-width: 600px; margin: 2rem auto;">
            <p style="color: var(--text-light); font-style: italic;">
                The To-Do List is currently empty. <br>
                <strong>Claim this issue on GitHub and start building!</strong>
            </p>
            <p style="color: var(--text-muted); margin-top: 1.5rem; font-size: 0.9rem;">
                Check the <a href="contributing.html" style="color: var(--primary-color);">Contributing Guidelines</a>
                to get started.
            </p>
        </div> -->


        <div class="todo-app">
            
            <div id="todoContainer">
                <ul id="todoList"></ul>
            </div>

            <div class="chat-input-wrapper">
                <input type="text" id="taskInput" placeholder="Type your task here..." />
                <button onclick="addTask()">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4">
                        <path fill-rule="evenodd"
                            d="M8 14a.75.75 0 0 0 .75-.75V4.56l1.22 1.22a.75.75 0 1 0 1.06-1.06l-2.5-2.5a.75.75 0 0 0-1.06 0l-2.5 2.5a.75.75 0 0 0 1.06 1.06l1.22-1.22v8.69c0 .414.336.75.75.75Z"
                            clip-rule="evenodd" />
                    </svg>
                </button>
            </div>
        </div>
    </main>
    <script>
        function addTask() {
            const input = document.getElementById("taskInput");
            const list = document.getElementById("todoList");
            const container = document.getElementById("todoContainer");

            if (input.value.trim() === "") return;

            const li = document.createElement("li");
            li.innerHTML = `
        <div class="task-left">
            <span class="task-circle" onclick="toggleTask(this)"></span>
            <span class="task-text">${input.value}</span>
        </div>

        <div class="task-actions">
            <svg onclick="openMenu(this)" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 12.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 18.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5Z" />
            </svg>

            <div class="task-menu">
                <button onclick="editTask(this)">Edit</button>
                <button onclick="deleteTask(this)">Delete</button>
            </div>
        </div>
    `;

            list.appendChild(li);

            requestAnimationFrame(() => {
                container.scrollTop = container.scrollHeight;
            });

            input.value = "";
        }
        function toggleTask(circle) {
            circle.classList.toggle("done");
            const text = circle.nextElementSibling;
            text.classList.toggle("completed");
        }

        let activeMenu = null;

        function openMenu(icon) {
            const menu = icon.nextElementSibling;

            if (activeMenu && activeMenu !== menu) {
                activeMenu.classList.remove("show");
            }

            menu.classList.toggle("show");
            activeMenu = menu.classList.contains("show") ? menu : null;
        }

        document.addEventListener("click", (e) => {
            if (!e.target.closest(".task-actions")) {
                if (activeMenu) activeMenu.classList.remove("show");
                activeMenu = null;
            }
        });


        function deleteTask(btn) {
            btn.closest("li").remove();
        }

        function editTask(btn) {
            const text = btn.closest("li").querySelector(".task-text");
            const newText = prompt("Edit task:", text.innerText);
            if (newText) text.innerText = newText;
        }
        document.getElementById("taskInput").addEventListener("keydown", e => {
            if (e.key === "Enter") addTask();
        });

    </script>

</body>

</html>